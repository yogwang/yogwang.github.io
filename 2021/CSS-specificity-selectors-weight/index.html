<!DOCTYPE html>
<html lang="zh">
  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>CSS 选择器权重和优先级 | blog [ YOG WANG ]</title>
  <meta name="keywords" content="YogWang,blog,web-frontend" />
  <meta name="description" content="Here is my blog, my notes and some thoughts" />
  <meta name="author" content="YogWang" />
  <meta name="google-site-verification" content="C6xTGgRjDkU2yb8izJ39IyLjwUMbDpXiATd2a-WLg5U" />
  
  
<link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css">

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.3.0"></head>

  <body>
    <header id="header">
  <a class="header-sign" href="/">
    <img src="/favicon.png" alt="sign" />
    <span>YOG<br />WANG</span>
  </a>
  <nav class="header-navbar">
    
    <a class="nav-link" href="/archives">文章</a>
    
    <a class="nav-link" href="/about">我</a>
    
    <a class="nav-link" target="_blank" rel="noopener" href="https://github.com/yogwang">GitHub</a>
    
  </nav>
</header>

    <div id="wrap">
      <main id="container">
  <div
  id="post-CSS-specificity-selectors-weight"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
>
  <div class="article-inner">
    <div class="article-meta">
      <p class="article-date">
  <time datetime="2021-05-14T03:03:15.000Z" itemprop="datePublished">2021-05-14</time>
</p> 
    </div>
    
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      CSS 选择器权重和优先级
    </h1>
  

    </header>
    
    <div class="article-entry" itemprop="articleBody">
       
  <article class="article-content">
    <p>群里突然又聊到了CSS样式的权重，这个话题每隔一段时间就会出现一次，但是每次都去搜索找选择器权重的文章分享有点太麻烦了，<br>主要是配图，想要找到自己记忆里的那张图真的很麻烦😂，所以还是自己整理一篇，以后直接分享自己的笔记就好了。<br>其实权重计算这个东西不麻烦，就是分 <code>4</code> 类:</p>
<ol>
<li><code>inlineStyle</code>: 行内样式</li>
<li><code>#ID</code>: ID选择器</li>
<li><code>.Class</code>: 类,属性和伪类选择器</li>
<li><code>Element</code>: 元素和伪类元素选择器</li>
</ol>
<p>简单的权重比较 <code>inline style &gt; ID &gt; Class &gt; Element &gt; *</code> 这个应该不需要说了吧，主要是多个选择器混合使用时计算的问题。</p>
<a id="more"></a>
<hr>
<p>大部分人想到CSS权重应该会首先想到这个图</p>
<p><img src="/2021/CSS-specificity-selectors-weight/simple.jpg" alt="简单计算"><br><small>图片来源: <a target="_blank" rel="noopener" href="http://www.nowamagic.net/">简明现代魔法</a></small></p>
<p>然后简单的按照这里的权重去计算出来结果去比较</p>
<p>例如：<br><img src="/2021/CSS-specificity-selectors-weight/demo.jpg" alt="计算DEMO"></p>
<h2 id="但是！"><a href="#但是！" class="headerlink" title="但是！"></a>但是！</h2><p>这样的计算会有一个问题，就是如果说某一项选择器超过了10个，那么是不是就会造成疑问，是否会晋级<br>例如</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 1个<span class="selector-tag">ID</span>选择器</span><br><span class="line"><span class="selector-id">#demo</span> &#123; </span><br><span class="line">  <span class="attribute">color</span>:green</span><br><span class="line">&#125;</span><br><span class="line">// 11个<span class="selector-tag">class</span>选择器</span><br><span class="line"><span class="selector-class">.demo1</span> <span class="selector-class">.demo2</span> <span class="selector-class">.demo3</span> <span class="selector-class">.demo4</span> <span class="selector-class">.demo5</span> <span class="selector-class">.demo6</span> <span class="selector-class">.demo7</span> <span class="selector-class">.demo8</span> <span class="selector-class">.demo9</span> <span class="selector-class">.demo10</span> <span class="selector-class">.demo11</span> &#123; </span><br><span class="line">  <span class="attribute">color</span>:red</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>按照上边的计算方式，得出的结果就是 <code>100 ：110</code>，但是实际并不会被11个类选择器所覆盖。</p>
<p><img src="/2021/CSS-specificity-selectors-weight/eg11class.jpg" alt="单ID和11个Class"></p>
<p>所以其实，是一个类似数组的形式，其计算结果为 <code>[0, 1, 0, 0]</code> 比上 <code>[0, 0, 11, 0]</code>，</p>
<p>这点可以从 <a target="_blank" rel="noopener" href="https://www.w3.org/TR/CSS2/cascade.html#specificity">W3C规范</a> 上看到，其实是分为 <code>[A, B, C, D]</code> 四类，然后去一对一去比较，并不会被 <strong>进位</strong> 所影响。</p>
<h2 id="⭐-important"><a href="#⭐-important" class="headerlink" title="⭐ !important"></a>⭐ <code>!important</code></h2><hr>
<p><strong><code>!important</code></strong> 是一个特殊的声明，W3C 将其与选择器权重计算区分开，<br>但是很多文章中把他放置到 <code>A</code> 类之前作为 <strong>第0类</strong> 权重，确实在实际工作中观察到的效果也一致，只不过不能通过重复声明 <code>!important</code> 来达到提升权重的目的（Invalid property value）</p>
<p>但如果是继承下来的 <code>!important</code> 属性，则会被新的声明覆盖。</p>
<h4 id="如果使用简写属性并且使用-important-声明"><a href="#如果使用简写属性并且使用-important-声明" class="headerlink" title="# 如果使用简写属性并且使用 !important 声明"></a># 如果使用简写属性并且使用 <code>!important</code> 声明</h4><blockquote>
<p>Declaring a shorthand property (e.g., ‘<code>background</code>‘) to be “<code>!important</code>“ is equivalent to declaring all of its sub-properties to be “<code>!important</code>“.</p>
<p>将简写属性（例如’<code>background</code>‘）声明为 “<code>!important</code>“ 等同于将其所有子属性声明为 “<code>!important</code>“ 。</p>
</blockquote>
<p>接下来看一个完整的例子 <code>&lt;div class=&quot;demo-class1 demo-class2&quot;&gt;&lt;span&gt;测试文字ABC&lt;/span&gt;&lt;/div&gt;</code> 的元素样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo-class1</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: italic <span class="number">12pt</span> sans-serif <span class="meta">!important</span>;</span><br><span class="line">  text-indent: 1em ! important; // 被覆盖</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.demo-class2</span> &#123;</span><br><span class="line">  font-weight: bold; // 未生效</span><br><span class="line">  <span class="selector-tag">font-size</span>: 24<span class="selector-tag">pt</span>; // 未生效</span><br><span class="line">  <span class="selector-tag">line-height</span>: 1.2 !<span class="selector-tag">important</span>; // 生效</span><br><span class="line">  <span class="selector-tag">text-indent</span>: 1.5<span class="selector-tag">em</span> !<span class="selector-tag">important</span>; // 生效</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.demo-class2</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">font-style</span>: normal // 生效</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h2><h4 id="我所推荐的权重计算图"><a href="#我所推荐的权重计算图" class="headerlink" title="我所推荐的权重计算图"></a>我所推荐的权重计算图</h4><p><img src="/2021/CSS-specificity-selectors-weight/specificity-calculationbase.png" alt="新权重计算图"></p>
<h4 id="新版本中的选择器权重修改"><a href="#新版本中的选择器权重修改" class="headerlink" title="新版本中的选择器权重修改"></a>新版本中的选择器权重修改</h4><p>在 W3C 最新版的 <a target="_blank" rel="noopener" href="https://www.w3.org/TR/selectors/#specificity">选择器文档</a> 中，行内样式已经从权重中移出了，权重变成了三类 [<code>#ID</code>, <code>.Class</code>, <code>Element</code>]</p>
<h4 id="在阅读-W3C-规范中，发现有中有这样一句话"><a href="#在阅读-W3C-规范中，发现有中有这样一句话" class="headerlink" title="在阅读 W3C 规范中，发现有中有这样一句话"></a>在阅读 W3C 规范中，发现有中有这样一句话</h4><blockquote>
<p>By default, rules in author style sheets have more weight than rules in user style sheets. Precedence is reversed, however, for “!important” rules. All user and author rules have more weight than rules in the UA’s default style sheet.</p>
<p>默认情况下，<code>author style sheets</code>(作者样式表) 中的规则比 <code>user style sheets</code>(用户样式表) 中的规则具有更大的权重。 但是，对于 “!important” 规则，优先级相反。 与 UA 的默认样式表中的规则相比，所有用户和作者规则的权重均更大。</p>
</blockquote>
<p>其中的 <code>Author Style sheets</code>、<code>User Style sheets</code> 是我没有遇到过的名词，<code>UA</code> 当然是浏览器(用户代理)默认样式，从查阅到的结果来看：</p>
<ul>
<li><p>作者样式表 (<code>Author Style sheets</code>)<br>作为开发者的我们为项目所配置的样式表</p>
</li>
<li><p>用户样式表 (<code>User Style sheets</code>)<br>浏览器为浏览站点的用户提供的一个修改当前站点样式的功能（一般都是浏览器插件实现）所生成的样式表</p>
</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="# 参考"></a># 参考</h2><p><a target="_blank" rel="noopener" href="https://www.w3.org/TR/CSS2/cascade.html#cascade">CSS2 - 6.4 The cascade - W3C Recommendation</a><br><a target="_blank" rel="noopener" href="https://www.w3.org/TR/CSS2/cascade.html#important-rules">CSS2 - 6.4.2 !important rules - W3C Recommendation</a><br><a target="_blank" rel="noopener" href="https://www.w3.org/TR/CSS2/cascade.html#specificity">CSS2 - 6.4.3 Calculating a selector’s specificity - W3C Recommendation</a><br><a target="_blank" rel="noopener" href="https://www.w3.org/TR/selectors/#specificity">Selectors - 16. Calculating a selector’s specificity - W3C Recommendation</a><br><a target="_blank" rel="noopener" href="https://drafts.csswg.org/css-cascade-4/#importance">Draft - 6.3. Important Declarations: the !important annotation - W3C Editor’s Draft</a></p>
<p><a target="_blank" rel="noopener" href="http://www.nowamagic.net/librarys/veda/detail/1606">CSS选择器的权重计算规则 - 简明现代魔法</a><br><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10196454">Day20：小事之 CSS 權重 (css specificity) - iT 邦幫忙</a><br><a target="_blank" rel="noopener" href="https://css-tricks.com/specifics-on-css-specificity/">Specifics on CSS Specificity | CSS-Tricks</a><br><a target="_blank" rel="noopener" href="https://teamtreehouse.com/community/user-style-sheet-vs-author-style-sheet">User style sheet vs Author style sheet | Treehouse Community</a></p>
 
  </article>


    </div>
  </div>
   
<nav id="article-nav">
  
  
    <a href="/2021/miniprogram-devDiary-03-lifecycle/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">older</strong>
      <div class="article-nav-title">微信小程序学习日记 L03 生命周期</div>
    </a>
  
</nav>
 
</div>



</main>
<aside id="sidebar">
  
    
<section class="userinfo">
    <img src="/img/userimg.jpg" alt="王阳阳">
    <h2>王阳阳</h2>
    <span>久之须自见得</span>
    <p>ODIN.INC</p>
    <p>Jiaxing,China</p>
    <div>
      
      <a class='fa fa-github' href="https://github.com/yogwang" target="_blank"></a>
      
      <a class='fa fa-weibo' href="http://weibo.com/yooooooge" target="_blank"></a>
      
    </div>
</section>

  
    
  <section class="widget-wrap">
    <h3 class="widget-title">recent_posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/CSS-specificity-selectors-weight/">CSS 选择器权重和优先级</a>
          </li>
        
          <li>
            <a href="/2021/miniprogram-devDiary-03-lifecycle/">微信小程序学习日记 L03 生命周期</a>
          </li>
        
          <li>
            <a href="/2021/miniprogram-devDiary-02-router/">微信小程序学习日记 L02 路由跳转</a>
          </li>
        
          <li>
            <a href="/2021/miniprogram-devDiary-01-structure/">微信小程序学习日记 L01 目录结构</a>
          </li>
        
          <li>
            <a href="/2021/miniprogram-devDiary-00/">微信小程序学习开发日记 L00</a>
          </li>
        
      </ul>
    </div>
  </section>

  
    
  <section class="widget-wrap">
    <h3 class="widget-title">archive</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li></ul>
    </div>
  </section>


  
    
  <section class="widget-wrap">
    <h3 class="widget-title">tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ant-Design-Vue/" rel="tag">Ant-Design-Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apache/" rel="tag">Apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Axios/" rel="tag">Axios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BetterScrol-js/" rel="tag">BetterScrol.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Caddy/" rel="tag">Caddy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Canvas/" rel="tag">Canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Chrome/" rel="tag">Chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coding/" rel="tag">Coding</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DigitalOcean/" rel="tag">DigitalOcean</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ECMAScript-6/" rel="tag">ECMAScript 6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ESlint/" rel="tag">ESlint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Electron/" rel="tag">Electron</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github/" rel="tag">Github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gulp/" rel="tag">Gulp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jeecg-boot/" rel="tag">Jeecg-boot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NVM/" rel="tag">NVM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/" rel="tag">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHPOK/" rel="tag">PHPOK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RaspberryPi/" rel="tag">RaspberryPi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ReactJS/" rel="tag">ReactJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Server/" rel="tag">Server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Three-js/" rel="tag">Three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-Router/" rel="tag">Vue-Router</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VueJS/" rel="tag">VueJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebSocket/" rel="tag">WebSocket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/" rel="tag">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tinyMCE/" rel="tag">tinyMCE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/" rel="tag">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0/" rel="tag">学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B4%E4%BC%9A%E5%BC%80%E5%8F%91%E6%97%A5%E8%AE%B0/" rel="tag">年会开发日记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%BB%E7%BB%93/" rel="tag">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%83%85%E6%84%9F/" rel="tag">情感</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8C%96%E5%9D%91/" rel="tag">挖坑</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%AA%E5%AE%8C%E6%88%90/" rel="tag">未完成</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A4%BE%E7%BE%A4%E5%88%86%E4%BA%AB/" rel="tag">社群分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%97%AE%E9%A2%98/" rel="tag">问题</a></li></ul>
    </div>
  </section>


  
</aside>
    </div>
    <footer id="footer">
  <span>
    &copy;2019-2021 YogWang powered_by
    <a href="http://hexo.io/" target="_blank">Hexo</a>
  </span>
  <br />
  <span
    >licensed
    <a href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank"
      >CC BY-NC 4.0</a
    ></span
  >
</footer>
<div>
  <a id="gotop" class="fa fa-level-up"></a>
</div>

<script src="https://unpkg.com/jquery@3.4.1/dist/jquery.js"></script>
 
<script src="/js/common.js"></script>


  </body>
</html>
